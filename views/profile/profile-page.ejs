<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<title>Profile</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Acme&family=Chewy&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.0/css/ionicons.min.css" integrity="sha512-JApjWRnfonFeGBY7t4yq8SWr1A6xVYEJgO/UMIYONxaR3C9GETKUg0LharbJncEzJF5Nmiv+Pr5QNulr81LjGQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="/css/profile/Block-Responsive-Item-List.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="/css/profile/Navigation-Profile.css">
	<link rel="stylesheet" href="/css/profile/styles.css">
	<link rel="stylesheet" href="/css/profile/Profile-Card.css">
	<link rel="stylesheet" href="/css/profile/Social-Icons.css">
	<link rel="stylesheet" href="/css/profile/Table-With-Search-1.css">
	<link rel="stylesheet" href="/css/profile/Table-With-Search.css">
	<style>
		body {
			font-family: 'Acme', sans-serif;
			background-color: #fff;
			color: #333;
		}

		.navbar {
			background-color: #fff;
			border-bottom: 2px solid #1dbf73;
		}

		.navbar-brand {
			font-family: 'Chewy', cursive;
			font-size: 32px;
			color: #1dbf73;
		}

		.navbar-text .login {
			font-size: 18px;
			font-family: 'Acme', sans-serif;
			color: #1dbf73;
		}

		.profile-card {
			text-align: center;
			margin-bottom: 15px;
		}

		.profile-back {
			background-color: #1dbf73;
			height: 150px;
			margin-bottom: -75px;
		}

		.profile-pic {
			width: 150px;
			height: 150px;
			margin-bottom: 10px;
		}

		.profile-name {
			background-color: #1dbf73;
			color: #fff;
			font-size: 20px;
			padding: 5px 0;
			border-radius: 100px;
			max-width: 300px;
			margin: 0 auto 10px auto;
		}

		.profile-bio {
			font-size: 20px;
			margin-bottom: 30px;
		}

		.card {
			border: 1px solid #1dbf73;
		}

		.card-footer {
			background-color: #1dbf73;
			color: #fff;
		}

		.btn-primary {
			background-color: #1dbf73;
			border-color: #1dbf73;
		}

		.btn-primary:hover {
			background-color: #17a863;
			border-color: #17a863;
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-light navbar-expand-md navigation-clean-button">
		<div class="container">
			<a class="navbar-brand" href="/">
				<img src="/assets/image.png" alt="Hirex Logo" style="height: 40px;">
			</a>
			<button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navcol-1">
				<ul class="nav navbar-nav mr-auto"></ul>
				<span class="navbar-text actions">
					<a class="login" href="/profile" style="font-size: 18px;font-family: sans-serif;">
						<%= data[0].user_name %>
					</a>
				</span>
				<% if(data[0].user_role != 2){ %>
				<span class="navbar-text actions">
					<a class="login" href="#" id="myBtn" style="font-size: 18px; font-family: sans-serif;">
						Add
					</a>
				</span>
				<span class="navbar-text actions">
					<a class="login" href="/profile/seller/transactions" style="font-size: 18px; font-family: sans-serif;">
						Transactions
					</a>
				</span>
				<% } %>
				<span class="navbar-text actions">
					<a class="login" href="/profile/settings-page"  style="font-size: 18px;font-family: sans-serif;">Settings</a>
				</span>
				<span class="navbar-text actions">
					<a class="login" href="/profile/logout"  style="font-size: 18px;font-family: sans-serif;">Log-out</a>
				</span>
			</div>
		</div>
	</nav>

	<div class="profile-card">
		<div class="profile-back"></div>
		<img class="rounded-circle profile-pic" src="/uploads/avatars/<%= data[0].user_avatar %>">
		<h3 class="profile-name"  style="font-size: 18px;font-family: sans-serif;"><%= data[0].user_name %></h3>
		<p class="profile-bio"  style="font-size: 18px;font-family: sans-serif;"><%= data[0].user_email %></p>
	</div>

	<% if (data[0].user_role != 2) { %>
	<div class="row" style="font-family: sans-serif;">
		<% for (var i = 0; i < data[0].Services.length; i++) { %>
		<div class="col-4 py-3 mx-auto col-xl-4 col-lg-6 col-md-6 col-sm-12" style="min-width:300px;min-height:300px;">
			<div class="card">
				<a href="/products/details/<%= data[0].Services[i].service_id %>">
					<img class="card-img-top" style="height:200px;" src="uploads/services/<%= data[0].Services[i].image_path %>">
				</a>
				<div class="card-body">
					<h5  style="font-family: sans-serif;"><%= data[0].Services[i].service_title %></h5>
					<p  style="font-family: sans-serif;"><%= data[0].Services[i].service_desc %></p>
				</div>
				<div class="card-footer text-center">
					<small>
						<a href="/products/details/<%= data[0].Services[i].service_id %>">
							<i class="fa fa-eye pr-1"></i>
							<br>
						</a>
					</small>
				</div>
			</div>
		</div>
		<% } %>
	</div>

	<div id="myModal" class="modal">
		<!-- Modal content -->
		<div class="modal-content">
			<div class="modal-header">
				<span class="close">&times;</span>
			</div>
			<div class="modal-body modal-body-custom">
				<form method="POST" action="/profile/add-product" enctype="multipart/form-data">
					<div class="form-group">
						<label><p style="font-family: sans-serif; font-size: 20px;">Categories</p></label>
						<select class="custom-select" name="category">
							<% for (var i = 0; i < categories.length; i++) { %>
							<option value="<%= categories[i].ID_category %>"><%= categories[i].category %></option>
							<% } %>
						</select>
					</div>
					<div class="form-group">
						<label>Title</label>
						<input type="text" name="title" class="form-control" required>
					</div>
					<div class="form-group">
						<label>Description</label>
						<textarea type="text" name="desc" class="form-control" required></textarea>
					</div>
					<div class="form-group">
						<label>Price </label>
						<input type="text" class="form-control" name="price" required>
					</div>
					<div class="form-group">
						<label>Image</label>
						<input type="file" class="form-control" name="photo" required>
					</div>
					<button type="submit" class="btn btn-primary">Add</button>
				</form>
			</div>
		</div>
	</div>
	<% } else { %>
	<div class="col-md-12 search-table-col">
		<span class="counter pull-right"></span>
		<div class="form-group pull-right col-lg-4">
			<input type="text" class="search form-control" placeholder="Search by typing here..">
		</div>
		<div class="table-responsive table-bordered table table-hover table-bordered results">
			<table class="table table-bordered table-hover">
				<thead class="bill-header cs">
					<tr>
						<th id="trs-hd" class="col-lg-1" style="width: 18%;">Service Name</th>
						<th id="trs-hd" class="col-lg-2" style="width: 18%;">Seller</th>
						<th id="trs-hd" class="col-lg-3" style="width: 12%;">Price</th>
						<th id="trs-hd" class="col-lg-2" style="width: 34%;">Note</th>
						<th id="trs-hd" class="col-lg-2" style="width: 18%;">Date</th>
						<th id="trs-hd" class="col-lg-2">Action</th>
					</tr>
				</thead>
				<tbody>
					<tr class="warning no-result">
						<td colspan="12"><i class="fa fa-warning"></i>&nbsp; No Result !!!</td>
					</tr>
					<% for (var i = 0; i < transact.length;i++) { %>
					<tr>
						<td><%= transact[i].Service.service_title %></td>
						<td style="width: 18%;"><%= transact[i].Service.User.user_name %></td>
						<td><%= transact[i].Service.service_price %></td>
						<td><%= transact[i].transaction_req %></td>
						<td><%= transact[i].transaction_datetime %></td>
						<td>
							<button class="btn btn-success" style="margin-left: 5px;" type="submit">
								<a class="fa fa-check" style="font-size: 15px;"
									href="/products/delete/<%= transact[i].transaction_id %>"></a>
							</button>
							<button class="btn btn-danger"
								style="margin-left: 5px; margin-right: auto; margin-bottom: auto;" type="submit">
								<a class="fa fa-trash" style="font-size: 15px;"
									href="/products/delete/<%= transact[i].transaction_id %>"></a>
							</button>
						</td>
					</tr>
					<% } %>
				</tbody>
			</table>
		</div>
	</div>
	<% } %>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha512-bnIvzh6FU75ZKxp0GXLH9bewza/OIw6dLVh9ICg0gogclmYGguQJWl8U30WpbsGTqbIiAwxTsbe76DErLq5EDQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="/js/profile/Table-With-Search.js"></script>
<script type="text/javascript">
	const modal = document.getElementById("myModal");

	const btn = document.getElementById("myBtn");

	const span = document.getElementsByClassName("close")[0];

	if (btn && span) {
		btn.onclick = () => (modal.style.display = "block");
	
		span.onclick = () => (modal.style.display = "none");
	}


	window.onclick = (event) => {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	}
</script>

</html>